import{_ as w,r as f,o as i,c as l,b as t,h as n,i as a,w as I,t as o,F as k,f as S,l as T,d as _,p as j,n as E}from"./index-N19imV52.js";var V={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",VITE_MAP_KEY:"AIzaSyBLmNf-TuB_bpae0roR3SSEJy40ssJR5eI",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:g,VITE_API_PATH:y}=V,A={data(){return{order:{},shipping:0}},methods:{getOrder(){const{orderId:c}=this.$route.params;this.$http.get(`${g}/api/${y}/order/${c}`).then(r=>{console.log(r),r.data.success&&(this.order=r.data.order,this.shipping=parseInt(this.order.total>=300?0:60))}).catch(r=>{console.log(r)})},payOrder(c){this.$http.post(`${g}/api/${y}/pay/${c}`).then(r=>{r.data.success&&this.getOrder()}).catch(r=>{console.log(r)})}},computed:{},mounted(){this.getOrder()}},s=c=>(j("data-v-549ac81c"),c=c(),E(),c),R={class:"container"},L={class:"mt-2"},N={class:"breadcrumb"},P={class:"breadcrumb-item"},O={class:"breadcrumb-item"},B=s(()=>t("li",{class:"breadcrumb-item"},"填寫訂單資訊",-1)),D={class:"my-4"},U={class:"row justify-content-center mb-10"},$=T('<div class="col-3 border-bottom border-5 border-primary" data-v-549ac81c><div class="d-flex flex-column align-items-center" data-v-549ac81c><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-549ac81c> 1 </div><p class="text-primary mb-2 fw-bold" data-v-549ac81c>填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary" data-v-549ac81c><div class="d-flex flex-column align-items-center" data-v-549ac81c><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-549ac81c> 2 </div><p class="text-primary mb-2 fw-bold" data-v-549ac81c>確認付款</p></div></div>',2),C={key:0,class:"col-3 border-bottom border-5 border-gray"},H=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray-3 text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-gray-3 mb-2 fw-bold"},"完成訂購")],-1)),M=[H],z={key:1,class:"col-3 border-bottom border-5 border-primary"},F=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-primary mb-2 fw-bold"},"完成訂購")],-1)),J=[F],q={class:"row justify-content-center flex-lg-row-reverse"},K={class:"col-lg-5 mb-5 mb-lg-0 ms-lg-3"},W={class:"card border-0 bg-light-green py-3 p-lg-4"},Y={key:0,class:"card-body"},G=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1)),Q={class:"table align-middle bg-light-green",style:{"table-layout":"fixed"}},X={class:"info"},Z=s(()=>t("tr",null,[t("td",{class:"p-md-3 border-0"},"付款狀態"),t("td",{class:"p-md-3 border-0"},[t("span",{class:"text-danger"},"尚未付款")])],-1)),tt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單金額",-1)),st={class:"p-md-3 border-0"},et=s(()=>t("td",{class:"p-md-3 border-0"},"訂單編號",-1)),ot={class:"p-md-3 border-0"},rt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單成立日期",-1)),ct={class:"p-md-3 border-0"},dt=s(()=>t("td",{class:"p-md-3 border-0"},"信箱",-1)),it={class:"p-md-3 border-0"},lt=s(()=>t("td",{class:"p-md-3 border-0"},"姓名",-1)),nt={class:"p-md-3 border-0"},at=s(()=>t("td",{class:"p-md-3 border-0"},"手機",-1)),_t={class:"p-md-3 border-0"},pt=s(()=>t("td",{class:"p-md-3 border-0"},"外送地址",-1)),ht={class:"p-md-3 border-0"},mt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單備註",-1)),bt={class:"p-md-3 border-0"},ut=s(()=>t("button",{type:"submit",class:"btn btn-secondary w-100"},"確認付款",-1)),ft={key:1,class:"card-body"},gt=s(()=>t("div",{class:"text-center mb-2"},[t("i",{class:"bi bi-cart-check text-success"})],-1)),yt=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4 text-center"},"完成訂購",-1)),vt=s(()=>t("div",{class:"text-justify mb-4"},[t("p",null," 恭喜您已完成訂購，當餐點送達指定地點時將以手機或簡訊聯繫您，若無法聯繫到您，此餐點將視為已送達。 若您同意，外送員並可選擇將餐點留置在您指定地點或由第三方代領， "),t("p",null,"若有任何問題，歡迎來電詢問：02-2345678")],-1)),xt={class:"text-center"},wt={class:"col-lg-5"},It=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1)),kt={class:"table align-middle",style:{"font-size":"14px"}},St=s(()=>t("tr",{class:"border-bottom"},null,-1)),Tt={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},jt=["src"],Et={class:"d-flex align-items-center justify-content-between w-75"},Vt={class:"mb-1"},At={class:"mb-1"},Rt={class:"mb-0"},Lt={class:"mb-0 text-end"};function Nt(c,r,Pt,Ot,e,v){var h,m,b,u;const p=f("RouterLink"),x=f("router-link");return i(),l("div",R,[t("nav",L,[t("ol",N,[t("li",P,[n(p,{to:"/",class:"text-primary"},{default:a(()=>[_("首頁")]),_:1})]),t("li",O,[n(p,{to:"/products",class:"text-primary"},{default:a(()=>[_("線上訂餐")]),_:1})]),B])]),t("main",D,[t("div",U,[$,e.order.is_paid?(i(),l("div",z,J)):(i(),l("div",C,M))]),t("div",q,[t("section",K,[t("div",W,[e.order.is_paid?(i(),l("div",ft,[gt,yt,vt,t("div",xt,[n(x,{to:"/products",class:"btn btn-secondary w-100 py-2 fs-lg-5"},{default:a(()=>[_("繼續逛逛")]),_:1})])])):(i(),l("div",Y,[G,t("form",{onSubmit:r[0]||(r[0]=I(d=>v.payOrder(e.order.id),["prevent"]))},[t("table",Q,[t("tbody",X,[Z,t("tr",null,[tt,t("td",st," NT$"+o(c.$filters.currency(e.order.total+e.shipping)),1)]),t("tr",null,[et,t("td",ot,o(e.order.id),1)]),t("tr",null,[rt,t("td",ct,o(new Date(e.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[dt,t("td",it,o((h=e.order.user)==null?void 0:h.email),1)]),t("tr",null,[lt,t("td",nt,o((m=e.order.user)==null?void 0:m.name),1)]),t("tr",null,[at,t("td",_t,o((b=e.order.user)==null?void 0:b.tel),1)]),t("tr",null,[pt,t("td",ht,o((u=e.order.user)==null?void 0:u.address),1)]),t("tr",null,[mt,t("td",bt,o(e.order.message?e.order.message:"無"),1)])])]),ut],32)]))])]),t("section",wt,[It,t("table",kt,[t("tbody",null,[St,(i(!0),l(k,null,S(e.order.products,d=>(i(),l("tr",{key:d.id},[t("td",Tt,[t("img",{src:d.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,jt),t("div",Et,[t("div",null,[t("p",Vt,o(d.product.title),1),t("p",At," NT$"+o(c.$filters.currency(d.product.price))+" / "+o(d.product.unit),1),t("p",Rt,"數量："+o(d.qty),1)]),t("p",Lt,"NT$"+o(c.$filters.currency(d.final_total)),1)])])]))),128))])])])])])])}const Dt=w(A,[["render",Nt],["__scopeId","data-v-549ac81c"]]);export{Dt as default};
