import{A as n}from"./swal-M6B9Ih-j.js";import{_ as I,r as g,o as i,c as l,b as t,h as a,i as _,w as k,t as o,F as T,f as S,l as j,d as p,p as A,n as E}from"./index-HW6CWjSZ.js";import"./sweetalert2.all-v9DpFcPT.js";var V={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",VITE_MAP_KEY:"AIzaSyBLmNf-TuB_bpae0roR3SSEJy40ssJR5eI",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:y,VITE_API_PATH:v}=V,R={data(){return{order:{},shipping:0}},methods:{getOrder(){const{orderId:d}=this.$route.params;this.$http.get(`${y}/api/${v}/order/${d}`).then(r=>{console.log(r),r.data.success&&(this.order=r.data.order,this.shipping=parseInt(this.order.total>=300?0:60))}).catch(r=>{n.toastTop(r.response.data.message,"error")})},payOrder(d){this.$http.post(`${y}/api/${v}/pay/${d}`).then(r=>{r.data.success&&(this.getOrder(),n.toastTop("已完成付款","success"))}).catch(r=>{n.toastTop(r.response.data.message,"error")})}},computed:{},mounted(){this.getOrder()}},s=d=>(A("data-v-31869cd7"),d=d(),E(),d),L={class:"container"},N={class:"mt-2"},P={class:"breadcrumb"},O={class:"breadcrumb-item"},B={class:"breadcrumb-item"},D=s(()=>t("li",{class:"breadcrumb-item"},"填寫訂單資訊",-1)),U={class:"my-4 my-lg-4"},$={class:"row justify-content-center mb-4 mb-lg-10"},C=j('<div class="col-3 border-bottom border-5 border-primary" data-v-31869cd7><div class="d-flex flex-column align-items-center" data-v-31869cd7><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-31869cd7> 1 </div><p class="text-primary mb-2 fw-bold" data-v-31869cd7>填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary" data-v-31869cd7><div class="d-flex flex-column align-items-center" data-v-31869cd7><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-31869cd7> 2 </div><p class="text-primary mb-2 fw-bold" data-v-31869cd7>確認付款</p></div></div>',2),H={key:0,class:"col-3 border-bottom border-5 border-gray"},M=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray-3 text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-gray-3 mb-2 fw-bold"},"完成訂購")],-1)),z=[M],F={key:1,class:"col-3 border-bottom border-5 border-primary"},J=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-primary mb-2 fw-bold"},"完成訂購")],-1)),q=[J],K={class:"row justify-content-center flex-lg-row-reverse"},W={class:"col-lg-5 mb-5 mb-lg-0 ms-lg-3"},Y={class:"card border-0 bg-light-green py-3 p-lg-4"},G={key:0,class:"card-body"},Q=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1)),X={class:"table align-middle bg-light-green",style:{"table-layout":"fixed"}},Z={class:"info"},tt=s(()=>t("tr",null,[t("td",{class:"p-md-3 border-0"},"付款狀態"),t("td",{class:"p-md-3 border-0"},[t("span",{class:"text-danger"},"尚未付款")])],-1)),st=s(()=>t("td",{class:"p-md-3 border-0"},"訂單金額",-1)),et={class:"p-md-3 border-0"},ot=s(()=>t("td",{class:"p-md-3 border-0"},"訂單編號",-1)),rt={class:"p-md-3 border-0"},dt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單成立日期",-1)),ct={class:"p-md-3 border-0"},it=s(()=>t("td",{class:"p-md-3 border-0"},"信箱",-1)),lt={class:"p-md-3 border-0"},nt=s(()=>t("td",{class:"p-md-3 border-0"},"姓名",-1)),at={class:"p-md-3 border-0"},_t=s(()=>t("td",{class:"p-md-3 border-0"},"手機",-1)),pt={class:"p-md-3 border-0"},mt=s(()=>t("td",{class:"p-md-3 border-0"},"外送地址",-1)),ht={class:"p-md-3 border-0"},bt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單備註",-1)),ut={class:"p-md-3 border-0"},ft=s(()=>t("button",{type:"submit",class:"btn btn-secondary w-100"},"確認付款",-1)),gt={key:1,class:"card-body"},yt=s(()=>t("div",{class:"text-center mb-2"},[t("i",{class:"bi bi-cart-check text-success"})],-1)),vt=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4 text-center"},"完成訂購",-1)),xt=s(()=>t("div",{class:"text-justify mb-4"},[t("p",null," 恭喜您已完成訂購，當餐點送達指定地點時將以手機或簡訊聯繫您，若無法聯繫到您，此餐點將視為已送達。 若您同意，外送員並可選擇將餐點留置在您指定地點或由第三方代領， "),t("p",null,"若有任何問題，歡迎來電詢問：02-2345678")],-1)),wt={class:"text-center"},It={class:"col-lg-5"},kt=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1)),Tt={class:"table align-middle",style:{"font-size":"14px"}},St=s(()=>t("tr",{class:"border-bottom"},null,-1)),jt={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},At=["src"],Et={class:"d-flex align-items-center justify-content-between w-75"},Vt={class:"mb-1"},Rt={class:"mb-1"},Lt={class:"mb-0"},Nt={class:"mb-0 text-end"};function Pt(d,r,Ot,Bt,e,x){var h,b,u,f;const m=g("RouterLink"),w=g("router-link");return i(),l("div",L,[t("nav",N,[t("ol",P,[t("li",O,[a(m,{to:"/",class:"text-primary"},{default:_(()=>[p("首頁")]),_:1})]),t("li",B,[a(m,{to:"/products",class:"text-primary"},{default:_(()=>[p("線上訂餐")]),_:1})]),D])]),t("main",U,[t("div",$,[C,e.order.is_paid?(i(),l("div",F,q)):(i(),l("div",H,z))]),t("div",K,[t("section",W,[t("div",Y,[e.order.is_paid?(i(),l("div",gt,[yt,vt,xt,t("div",wt,[a(w,{to:"/products",class:"btn btn-secondary w-100 py-2 fs-lg-5"},{default:_(()=>[p("繼續逛逛")]),_:1})])])):(i(),l("div",G,[Q,t("form",{onSubmit:r[0]||(r[0]=k(c=>x.payOrder(e.order.id),["prevent"]))},[t("table",X,[t("tbody",Z,[tt,t("tr",null,[st,t("td",et," NT$"+o(d.$filters.currency(e.order.total+e.shipping)),1)]),t("tr",null,[ot,t("td",rt,o(e.order.id),1)]),t("tr",null,[dt,t("td",ct,o(new Date(e.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[it,t("td",lt,o((h=e.order.user)==null?void 0:h.email),1)]),t("tr",null,[nt,t("td",at,o((b=e.order.user)==null?void 0:b.name),1)]),t("tr",null,[_t,t("td",pt,o((u=e.order.user)==null?void 0:u.tel),1)]),t("tr",null,[mt,t("td",ht,o((f=e.order.user)==null?void 0:f.address),1)]),t("tr",null,[bt,t("td",ut,o(e.order.message?e.order.message:"無"),1)])])]),ft],32)]))])]),t("section",It,[kt,t("table",Tt,[t("tbody",null,[St,(i(!0),l(T,null,S(e.order.products,c=>(i(),l("tr",{key:c.id},[t("td",jt,[t("img",{src:c.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,At),t("div",Et,[t("div",null,[t("p",Vt,o(c.product.title),1),t("p",Rt," NT$"+o(d.$filters.currency(c.product.price))+" / "+o(c.product.unit),1),t("p",Lt,"數量："+o(c.qty),1)]),t("p",Nt,"NT$"+o(d.$filters.currency(c.final_total)),1)])])]))),128))])])])])])])}const Ct=I(R,[["render",Pt],["__scopeId","data-v-31869cd7"]]);export{Ct as default};
