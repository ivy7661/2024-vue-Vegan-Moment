import{s as i,l as e}from"./index-A52Ioxsw.js";var d={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:o,VITE_API_PATH:r}=d,h=i("cartStore",{state:()=>({carts:[],order_total:0,final_total:0,total:0,deliveryFee:0}),actions:{getCart(){const a=`${o}/api/${r}/cart`;e.get(a).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total,this.deliveryFee=parseInt(this.order_total)>=300?0:60,console.log("piniaCart",t)}).catch(t=>{alert(t.res.data.message)})},addToCart(a,t){const l={product_id:a,qty:t},s=`${o}/api/${r}/cart`;e.post(s,{data:l}).then(c=>{console.log(c),alert("加入購物車成功"),this.getCart()})},changeCartQty(a){const t={product_id:a.product_id,qty:a.qty};e.put(`${o}/api/${r}/cart/${a.id}`,{data:t}).then(l=>{alert("修改成功"),this.getCart()}).catch(l=>{console.log(l)})},removeCartsAll(){e.delete(`${o}/api/${r}/carts`).then(()=>{alert("已清空購物車"),this.getCart()}).catch(a=>{console.log(a)})},delCartItem(a){e.delete(`${o}/api/${r}/cart/${a}`).then(t=>{alert("刪除成功"),this.getCart()}).catch(t=>{console.log(t)})}}});export{h as c};
