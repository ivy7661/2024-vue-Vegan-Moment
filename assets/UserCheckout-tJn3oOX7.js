import{_ as w,r as f,o as i,c as l,b as t,h as n,i as a,w as k,t as o,F as I,f as j,j as S,d as _,p as T,k as V}from"./index-A52Ioxsw.js";var E={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:g,VITE_API_PATH:y}=E,A={data(){return{order:{},shipping:0}},methods:{getOrder(){const{orderId:r}=this.$route.params;this.$http.get(`${g}/api/${y}/order/${r}`).then(c=>{console.log(c),c.data.success&&(this.order=c.data.order,this.shipping=parseInt(this.order.total>=300?0:60))}).catch(c=>{console.log(c)})},payOrder(r){this.$http.post(`${g}/api/${y}/pay/${r}`).then(c=>{c.data.success&&this.getOrder()}).catch(c=>{console.log(c)})}},computed:{},mounted(){this.getOrder()}},s=r=>(T("data-v-549ac81c"),r=r(),V(),r),L={class:"container"},N={class:"mt-2"},O={class:"breadcrumb"},P={class:"breadcrumb-item"},R={class:"breadcrumb-item"},D=s(()=>t("li",{class:"breadcrumb-item"},"填寫訂單資訊",-1)),U={class:"my-4"},$={class:"row justify-content-center mb-10"},B=S('<div class="col-3 border-bottom border-5 border-primary" data-v-549ac81c><div class="d-flex flex-column align-items-center" data-v-549ac81c><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-549ac81c> 1 </div><p class="text-primary mb-2 fw-bold" data-v-549ac81c>填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary" data-v-549ac81c><div class="d-flex flex-column align-items-center" data-v-549ac81c><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;" data-v-549ac81c> 2 </div><p class="text-primary mb-2 fw-bold" data-v-549ac81c>確認付款</p></div></div>',2),C={key:0,class:"col-3 border-bottom border-5 border-gray"},H=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray-3 text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-gray-3 mb-2 fw-bold"},"完成訂購")],-1)),F=[H],M={key:1,class:"col-3 border-bottom border-5 border-primary"},q=s(()=>t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}}," 3 "),t("p",{class:"text-primary mb-2 fw-bold"},"完成訂購")],-1)),z=[q],W={class:"row justify-content-center flex-lg-row-reverse"},G={class:"col-lg-5 mb-5 mb-lg-0 ms-lg-3"},J={class:"card border-0 bg-light-green py-3 p-lg-4"},K={key:0,class:"card-body"},Q=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1)),X={class:"table align-middle bg-light-green",style:{"table-layout":"fixed"}},Y={class:"info"},Z=s(()=>t("tr",null,[t("td",{class:"p-md-3 border-0"},"付款狀態"),t("td",{class:"p-md-3 border-0"},[t("span",{class:"text-danger"},"尚未付款")])],-1)),tt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單金額",-1)),st={class:"p-md-3 border-0"},et=s(()=>t("td",{class:"p-md-3 border-0"},"訂單編號",-1)),ot={class:"p-md-3 border-0"},ct=s(()=>t("td",{class:"p-md-3 border-0"},"訂單成立日期",-1)),rt={class:"p-md-3 border-0"},dt=s(()=>t("td",{class:"p-md-3 border-0"},"信箱",-1)),it={class:"p-md-3 border-0"},lt=s(()=>t("td",{class:"p-md-3 border-0"},"姓名",-1)),nt={class:"p-md-3 border-0"},at=s(()=>t("td",{class:"p-md-3 border-0"},"手機",-1)),_t={class:"p-md-3 border-0"},pt=s(()=>t("td",{class:"p-md-3 border-0"},"外送地址",-1)),ht={class:"p-md-3 border-0"},mt=s(()=>t("td",{class:"p-md-3 border-0"},"訂單備註",-1)),bt={class:"p-md-3 border-0"},ut=s(()=>t("button",{type:"submit",class:"btn btn-secondary w-100"},"確認付款",-1)),ft={key:1,class:"card-body"},gt=s(()=>t("div",{class:"text-center mb-2"},[t("i",{class:"bi bi-cart-check text-success"})],-1)),yt=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4 text-center"},"完成訂購",-1)),vt=s(()=>t("div",{class:"text-justify mb-4"},[t("p",null," 恭喜您已完成訂購，當餐點送達指定地點時將以手機或簡訊聯繫您，若無法聯繫到您，此餐點將視為已送達。 若您同意，外送員並可選擇將餐點留置在您指定地點或由第三方代領， "),t("p",null,"若有任何問題，歡迎來電詢問：02-2345678")],-1)),xt={class:"text-center"},wt={class:"col-lg-5"},kt=s(()=>t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1)),It={class:"table align-middle",style:{"font-size":"14px"}},jt=s(()=>t("tr",{class:"border-bottom"},null,-1)),St={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},Tt=["src"],Vt={class:"d-flex align-items-center justify-content-between w-75"},Et={class:"mb-1"},At={class:"mb-1"},Lt={class:"mb-0"},Nt={class:"mb-0 text-end"};function Ot(r,c,Pt,Rt,e,v){var h,m,b,u;const p=f("RouterLink"),x=f("router-link");return i(),l("div",L,[t("nav",N,[t("ol",O,[t("li",P,[n(p,{to:"/",class:"text-primary"},{default:a(()=>[_("首頁")]),_:1})]),t("li",R,[n(p,{to:"/products",class:"text-primary"},{default:a(()=>[_("線上訂餐")]),_:1})]),D])]),t("main",U,[t("div",$,[B,e.order.is_paid?(i(),l("div",M,z)):(i(),l("div",C,F))]),t("div",W,[t("section",G,[t("div",J,[e.order.is_paid?(i(),l("div",ft,[gt,yt,vt,t("div",xt,[n(x,{to:"/products",class:"btn btn-secondary w-100 py-2 fs-lg-5"},{default:a(()=>[_("繼續逛逛")]),_:1})])])):(i(),l("div",K,[Q,t("form",{onSubmit:c[0]||(c[0]=k(d=>v.payOrder(e.order.id),["prevent"]))},[t("table",X,[t("tbody",Y,[Z,t("tr",null,[tt,t("td",st," NT$"+o(r.$filters.currency(e.order.total+e.shipping)),1)]),t("tr",null,[et,t("td",ot,o(e.order.id),1)]),t("tr",null,[ct,t("td",rt,o(new Date(e.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[dt,t("td",it,o((h=e.order.user)==null?void 0:h.email),1)]),t("tr",null,[lt,t("td",nt,o((m=e.order.user)==null?void 0:m.name),1)]),t("tr",null,[at,t("td",_t,o((b=e.order.user)==null?void 0:b.tel),1)]),t("tr",null,[pt,t("td",ht,o((u=e.order.user)==null?void 0:u.address),1)]),t("tr",null,[mt,t("td",bt,o(e.order.message?e.order.message:"無"),1)])])]),ut],32)]))])]),t("section",wt,[kt,t("table",It,[t("tbody",null,[jt,(i(!0),l(I,null,j(e.order.products,d=>(i(),l("tr",{key:d.id},[t("td",St,[t("img",{src:d.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,Tt),t("div",Vt,[t("div",null,[t("p",Et,o(d.product.title),1),t("p",At," NT$"+o(r.$filters.currency(d.product.price))+" / "+o(d.product.unit),1),t("p",Lt,"數量："+o(d.qty),1)]),t("p",Nt,"NT$"+o(r.$filters.currency(d.final_total)),1)])])]))),128))])])])])])])}const Ut=w(A,[["render",Ot],["__scopeId","data-v-549ac81c"]]);export{Ut as default};
