import{_ as I,V as y,m as v,I as V,a as L,r as d,o as c,c as n,h as r,i as a,b as t,t as l,F as _,f as m,g as k,v as S,d as u,e as f}from"./index-2HZypFVn.js";import{V as w}from"./VeganLoader-qPPDCQfY.js";import{c as h}from"./cartStore-Xwnpf9it.js";import"./loadingStore-OZp-1xHn.js";import"./sweetalert2.all-yx1le-Fi.js";import"./swal-mJXYrnQA.js";var T={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",VITE_MAP_KEY:"AIzaSyBLmNf-TuB_bpae0roR3SSEJy40ssJR5eI",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:P,VITE_API_PATH:x}=T,E={data(){return{productId:"",productInfo:{},cartQty:1,selectImg:"",fullPage:!0,isLoading:!1}},components:{VueLoading:y,VeganLoader:w},mounted(){this.getProducts(),this.cartQty=1},computed:{...v(h,["loadingStatus"])},methods:{getProducts(){this.isLoading=!0,this.productId=this.$route.params.id;const i=`${P}/api/${x}/product/${this.productId}`;V.get(i).then(e=>{this.isLoading=!1,this.productInfo=e.data.product})},...L(h,["addToCart"])}},A={class:"container"},C={class:"row justify-content-center py-4 py-lg-0"},R={class:"col-lg-5"},N={class:"my-4"},U={"aria-label":"breadcrumb"},B={class:"breadcrumb mb-3"},D={class:"breadcrumb-item"},Q={class:"breadcrumb-item"},j={class:"breadcrumb-item"},H={class:"mb-5 vl-parent",ref:"load"},M=["src","alt"],F=["src","alt"],J=["src","alt","onClick"],O={class:"col-lg-5 my-lg-10"},z={class:"h2 mb-2"},K={class:"mb-2 mb-lg-3 text-gray-600"},W={class:"d-flex flex-row"},Y={class:"h2 text-bold text-primary mb-1 me-3"},q={class:"h4 mt-2 mb-4"},G={class:"text-gray-3"},X={class:"d-flex flex-row"},Z=t("p",{class:"mt-2 me-2"},"數量：",-1),$=["disabled"],tt=["value"],ot=["disabled"],st={key:0,class:"ms-1 fa-solid fa-spinner fa-spin"},et=["disabled"],it={class:"mb-4"},ct=t("p",{class:"fs-6 fw-bold text-primary"},"商品介紹",-1),nt={key:0,class:"mb-4"},lt=t("p",{class:"fs-6 fw-bold text-primary"},"過敏資訊",-1);function rt(i,e,dt,at,o,ut){const g=d("VeganLoader"),b=d("VueLoading"),p=d("RouterLink");return c(),n("div",A,[r(b,{active:o.isLoading,"onUpdate:active":e[0]||(e[0]=s=>o.isLoading=s),"is-full-page":o.fullPage},{default:a(()=>[r(g)]),_:1},8,["active","is-full-page"]),t("div",C,[t("section",R,[t("div",N,[t("nav",U,[t("ol",B,[t("li",D,[r(p,{to:"/"},{default:a(()=>[u("首頁")]),_:1})]),t("li",Q,[r(p,{to:"/products"},{default:a(()=>[u("線上訂餐")]),_:1})]),t("li",j,l(o.productInfo.category),1)])])]),t("div",H,[o.selectImg?(c(),n("img",{key:1,src:o.selectImg,alt:o.productInfo.title,class:"object-fit-cover w-100 mb-2 h-lg-img",height:"250"},null,8,F)):(c(),n("img",{key:0,src:o.productInfo.imageUrl,alt:o.productInfo.title,class:"object-fit-cover w-100 mb-2 h-lg-img",height:"250"},null,8,M)),(c(!0),n(_,null,m(o.productInfo.imagesUrl,s=>(c(),n("img",{key:s,src:s,alt:o.productInfo.title,width:"80",height:"80",class:"object-fit-cover me-2",onClick:pt=>o.selectImg=s,style:{cursor:"pointer"}},null,8,J))),128))],512)]),t("section",O,[t("h1",z,l(o.productInfo.title),1),t("h6",K,l(o.productInfo.info),1),t("div",W,[t("p",Y,"NT$"+l(o.productInfo.price),1),t("p",q,[t("small",G,[t("del",null,"NT$"+l(o.productInfo.origin_price),1)])])]),t("div",X,[Z,k(t("select",{class:"form-select mb-4","onUpdate:modelValue":e[1]||(e[1]=s=>o.cartQty=s),disabled:i.loadingStatus===o.productInfo.id,style:{"max-width":"150px"}},[(c(),n(_,null,m(20,s=>t("option",{key:s+1234,value:s},l(s),9,tt)),64))],8,$),[[S,o.cartQty]])]),t("button",{type:"button",class:"btn btn-secondary mb-3 me-4 d-block w-100",disabled:i.loadingStatus,onClick:e[2]||(e[2]=s=>i.addToCart(o.productInfo.id,o.cartQty))},[u(" 加入購物車 "),i.loadingStatus?(c(),n("i",st)):f("",!0)],8,ot),t("button",{type:"button",class:"btn btn-outline-secondary mb-4 d-block w-100",disabled:i.loadingStatus===o.productInfo.id,onClick:e[3]||(e[3]=s=>i.addToCart(o.productInfo.id,i.productInfoQty))}," 立即購買 ",8,et),t("div",it,[ct,t("p",null,l(o.productInfo.description),1)]),o.productInfo.allergy?(c(),n("div",nt,[lt,t("p",null,l(o.productInfo.allergy),1)])):f("",!0)])])])}const It=I(E,[["render",rt]]);export{It as default};
