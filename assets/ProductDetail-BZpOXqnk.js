import{_ as V,V as P,m,a as g,H as x,r as h,o as i,c as l,h as n,i as d,b as t,t as r,F as _,f,g as L,v as T,d as a,e as p}from"./index-g2nTe-j7.js";import{V as S}from"./VeganLoader-9HeX7Lp2.js";import{c as b,l as C}from"./cartStore-N814DkhC.js";import{p as y}from"./productStore-opU43Myh.js";import"./sweetalert2.all-MRAxtZ74.js";import"./swal-TesBxQWR.js";var E={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",VITE_MAP_KEY:"AIzaSyBLmNf-TuB_bpae0roR3SSEJy40ssJR5eI",BASE_URL:"/2024-vue-Vegan-Moment/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:N,VITE_API_PATH:A}=E,R={data(){return{productId:"",productInfo:{},cartQty:1,selectImg:"",fullPage:!0,isLoading:!1}},components:{VueLoading:P,VeganLoader:S},mounted(){this.getProduct(),this.cartQty=1,this.getProducts()},computed:{...m(y,["products"]),...m(b,["loadingStatus"]),...m(C,["loadingProductId"])},watch:{"$route.params":{immediate:!0,handler(){this.$route.params.id&&this.getProduct()}}},methods:{...g(y,["getProducts"]),...g(b,["addToCart"]),buyNow(e,c){this.addToCart(e,c),this.$router.push("/orderInfo")},getProduct(){this.isLoading=!0,this.productId=this.$route.params.id;const e=`${N}/api/${A}/product/${this.productId}`;x.get(e).then(c=>{this.isLoading=!1,this.productInfo=c.data.product})}}},U={class:"container"},Q={class:"row justify-content-center py-lg-0"},B={class:"col-lg-5"},D={class:"my-4"},j={"aria-label":"breadcrumb"},M={class:"breadcrumb mb-3"},H={class:"breadcrumb-item"},F={class:"breadcrumb-item"},J={class:"breadcrumb-item"},O={class:"mb-5 vl-parent",ref:"load"},z=["src","alt"],K=["src","alt"],Y=["src","alt","onClick"],q={class:"col-lg-5 my-lg-10"},G={class:"h2 mb-2"},W={class:"mb-2 mb-lg-3 text-gray-600"},X={class:"d-flex flex-row"},Z={class:"h2 text-bold text-primary mb-1 me-3"},$={class:"h4 mt-2 mb-4"},tt={class:"text-gray-3"},st={class:"d-flex flex-row"},ot=t("p",{class:"mt-2 me-2"},"數量：",-1),et=["disabled"],ct=["value"],it=["disabled"],lt={key:0,class:"ms-1 fa-solid fa-spinner fa-spin"},rt={class:"mb-4"},nt=t("p",{class:"fs-6 fw-bold text-primary"},"商品介紹",-1),dt={key:0,class:"mb-4"},at=t("p",{class:"fs-6 fw-bold text-primary"},"過敏資訊",-1),ut={class:"col-lg-10 py-8 pt-lg-0"},_t=t("div",{class:"text-center text-lg-start"},[t("h2",{class:"position-relative fs-3 fs-lg-2 fw-lg-bold mb-3 mb-lg-4"},[t("i",{class:"bi bi-feather text-primary"}),a(" 相關餐點 ")])],-1),pt={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 gy-5"},mt={key:0,class:"col"},ht={class:"col"},ft={class:"card-img"},gt=["src","alt"],bt={class:"py-3 py-lg-2"},yt={class:"fs-4 text-dark mb-2 mb-lg-1"},It={class:"text-primary d-flex align-items-center"},vt={class:"fs-6 text-gray-600 ms-2"},kt=["onClick","disabled"],wt=t("span",null,"加入購物車",-1),Vt={key:0,class:"fas fa-spinner fa-pulse ms-2"};function Pt(e,c,xt,Lt,s,I){const v=h("VeganLoader"),k=h("VueLoading"),u=h("RouterLink");return i(),l("div",U,[n(k,{active:s.isLoading,"onUpdate:active":c[0]||(c[0]=o=>s.isLoading=o),"is-full-page":s.fullPage},{default:d(()=>[n(v)]),_:1},8,["active","is-full-page"]),t("div",Q,[t("section",B,[t("div",D,[t("nav",j,[t("ol",M,[t("li",H,[n(u,{to:"/"},{default:d(()=>[a("首頁")]),_:1})]),t("li",F,[n(u,{to:"/products"},{default:d(()=>[a("線上訂餐")]),_:1})]),t("li",J,r(s.productInfo.category),1)])])]),t("div",O,[s.selectImg?(i(),l("img",{key:1,src:s.selectImg,alt:s.productInfo.title,class:"object-fit-cover w-100 mb-2 h-lg-img",height:"250"},null,8,K)):(i(),l("img",{key:0,src:s.productInfo.imageUrl,alt:s.productInfo.title,class:"object-fit-cover w-100 mb-2 h-lg-img",height:"250"},null,8,z)),(i(!0),l(_,null,f(s.productInfo.imagesUrl,o=>(i(),l("img",{key:o,src:o,alt:s.productInfo.title,width:"80",height:"80",class:"object-fit-cover me-2",onClick:w=>s.selectImg=o,style:{cursor:"pointer"}},null,8,Y))),128))],512)]),t("section",q,[t("h1",G,r(s.productInfo.title),1),t("h6",W,r(s.productInfo.info),1),t("div",X,[t("p",Z,"NT$"+r(s.productInfo.price),1),t("p",$,[t("small",tt,[t("del",null,"NT$"+r(s.productInfo.origin_price),1)])])]),t("div",st,[ot,L(t("select",{class:"form-select mb-4","onUpdate:modelValue":c[1]||(c[1]=o=>s.cartQty=o),disabled:e.loadingStatus===s.productInfo.id,style:{"max-width":"150px"}},[(i(),l(_,null,f(20,o=>t("option",{key:o+1234,value:o},r(o),9,ct)),64))],8,et),[[T,s.cartQty]])]),t("button",{type:"button",class:"btn btn-outline-secondary mb-3 me-4 d-block w-100",disabled:e.loadingStatus,onClick:c[2]||(c[2]=o=>e.addToCart(s.productInfo.id,s.cartQty))},[a(" 加入購物車 "),e.loadingStatus?(i(),l("i",lt)):p("",!0)],8,it),t("button",{type:"button",class:"btn btn-secondary mb-3 me-4 d-block w-100",onClick:c[3]||(c[3]=o=>I.buyNow(s.productInfo.id,s.cartQty))}," 立即購買 "),t("div",rt,[nt,t("p",null,r(s.productInfo.description),1)]),s.productInfo.allergy?(i(),l("div",dt,[at,t("p",null,r(s.productInfo.allergy),1)])):p("",!0)]),t("section",ut,[_t,t("div",pt,[(i(!0),l(_,null,f(e.products,o=>(i(),l(_,{key:o.id},[o.category===s.productInfo.category&&o.title!==s.productInfo.title?(i(),l("div",mt,[t("div",ht,[t("div",ft,[n(u,{to:`/products/${o.id}`},{default:d(()=>[t("img",{src:o.imageUrl,alt:o.title,class:"w-100 d-block rounded-3",height:"240"},null,8,gt)]),_:2},1032,["to"])]),t("div",bt,[n(u,{to:`/products/${o.id}`},{default:d(()=>[t("h4",yt,r(o.title),1)]),_:2},1032,["to"]),t("h5",It,[a(" NT$"+r(o.price)+" ",1),t("span",vt,[t("del",null,"NT$"+r(o.origin_price),1)])])]),t("button",{type:"button",class:"btn btn-secondary fs-6 w-100",onClick:w=>e.addToCart(o.id,s.cartQty),disabled:e.loadingProductId===o.id},[wt,e.loadingProductId===o.id?(i(),l("i",Vt)):p("",!0)],8,kt)])])):p("",!0)],64))),128))])])])])}const Rt=V(R,[["render",Pt]]);export{Rt as default};
