import{H as c,I as o}from"./index-wVkUUv2X.js";import{S as u}from"./sweetalert2.all-ZC8NjLcx.js";import{A as e}from"./swal-cgBj5QpE.js";const p=c("loadingStore",{state:()=>({loadingProductId:""})});var h={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"js23",VITE_MAP_KEY:"AIzaSyBLmNf-TuB_bpae0roR3SSEJy40ssJR5eI",BASE_URL:"/HW-Vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:r,VITE_API_PATH:n}=h,i=p(),f=c("cartStore",{state:()=>({carts:[],order_total:0,final_total:0,total:0,deliveryFee:0,loadingStatus:!1}),actions:{getCart(){const a=`${r}/api/${n}/cart`;o.get(a).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total,this.deliveryFee=parseInt(this.order_total)>=300?0:60}).catch(t=>{e.toastTop(t.response.data.message,"error")})},addToCart(a,t){this.loadingStatus=!0,i.loadingProductId=a;const s={product_id:a,qty:t},d=`${r}/api/${n}/cart`;o.post(d,{data:s}).then(l=>{this.loadingStatus=!1,i.loadingProductId="",e.toastTop(l.data.message,"success"),this.getCart()})},changeCartQty(a){const t={product_id:a.product_id,qty:a.qty};o.put(`${r}/api/${n}/cart/${a.id}`,{data:t}).then(s=>{e.toastTop(s.data.message,"success"),this.getCart()}).catch(s=>{e.toastTop(s.response.data.message)})},alertDelAll(){u.mixin({customClass:{confirmButton:"btn btn-danger ms-2",cancelButton:"btn btn-outline-danger"},buttonsStyling:!1}).fire({title:"請問您確認要清空購物車嗎？",text:"刪除後將無法恢復",icon:"warning",showCancelButton:!0,confirmButtonText:"確認刪除",cancelButtonText:"取消",reverseButtons:!0}).then(t=>{t.isConfirmed&&this.removeCartsAll()})},removeCartsAll(){o.delete(`${r}/api/${n}/carts`).then(()=>{e.toastTop("已清空購物車","success"),this.getCart()}).catch(a=>{e.toastTop(a.response.data.message,"error")})},delCartItem(a){o.delete(`${r}/api/${n}/cart/${a}`).then(t=>{e.toastTop(t.data.message,"success"),this.getCart()}).catch(t=>{e.toastTop(t.response.data.message,"error")})}}});export{f as c,p as l};
